TODO the whole thing

Not supported:
- Macro functions
- #if directive very limited. Behaves slightly different. (unlike https://gcc.gnu.org/onlinedocs/cpp/If.html)